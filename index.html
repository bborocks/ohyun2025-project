<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Dev Idea Store</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav>
        <div class="nav-header" style="position:relative;">
            <h1>Game Dev Idea Store</h1>
            <div id="auth-btns" style="position:absolute;top:1.2rem;right:2rem;display:flex;gap:0.5rem;"></div>
        </div>
        <div class="nav-menu">
            <a href="#" class="nav-item" id="nav-login">ğŸ‘¤ ë¡œê·¸ì¸</a>
            <a href="#" class="nav-item" id="nav-search">ğŸ” ì‚¬ìš©ì ê²€ìƒ‰</a>
            <a href="#" class="nav-item" id="nav-board">ğŸ’¡ ê²Œì‹œíŒ</a>
        </div>
    </nav>
    <main>
        <div class="section-divider" id="user-section" style="display:none;">
            <h2 class="section-title">ğŸ‘¤ ì‚¬ìš©ì ê´€ë¦¬</h2>
            <div class="card">
                <div id="user-login" class="active">
                    <h3>ì‹œì‘í•˜ê¸°</h3>
                    <form id="login-form">
                        <input type="text" id="username" placeholder="ì‚¬ìš©ì ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" required>
                        <input type="password" id="password" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”" required>
                        <button type="submit" class="btn-submit">ì…ì¥í•˜ê¸°</button>
                        <button type="button" id="login-signup-btn" class="btn-submit" style="margin-left:0.5rem;">íšŒì›ê°€ì…</button>
                    </form>
                </div>
                <div id="welcome-message" class="hidden">
                    <h3>í™˜ì˜í•©ë‹ˆë‹¤, <span id="current-user"></span>ë‹˜!</h3>
                    <button id="logout-btn" class="btn-submit">ë¡œê·¸ì•„ì›ƒ</button>
                </div>
            </div>
        </div>

        <div class="section-divider" id="search-section">
            <h2 class="section-title">ğŸ” ì‚¬ìš©ì ê²€ìƒ‰</h2>
            <div class="card">
                <div class="search-container">
                    <input type="text" id="search-user" placeholder="ì‚¬ìš©ì ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰...">
                    <button id="search-btn" class="btn-submit">ê²€ìƒ‰</button>
                </div>
                <div id="search-results">
                    <!-- ê²€ìƒ‰ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
            </div>
        </div>

        <div class="section-divider" id="board-section">
            <h2 class="section-title">ğŸ’¡ ê²Œì‹œíŒ</h2>
            <section id="posts">
                <!-- ê²Œì‹œë¬¼ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
            </section>
        </div>
    </main>

    <template id="post-template">
        <article class="post card">
            <h3 class="post-title"></h3>
            <p class="post-content"></p>
            <div class="post-author"></div>
            <div class="post-actions">
                <button class="btn-edit hidden">ìˆ˜ì •</button>
                <button class="btn-delete hidden">ì‚­ì œ</button>
            </div>
        </article>
    </template>

    <button id="add-idea-btn" class="hidden" style="position:fixed;right:32px;bottom:32px;width:56px;height:56px;border-radius:50%;font-size:2em;">+</button>
    <script>
    // ëª©ì°¨ í´ë¦­ ì‹œ í•´ë‹¹ ì„¹ì…˜ìœ¼ë¡œ ìŠ¤í¬ë¡¤(ì •í™•íˆ ë§ì¶”ê¸°, ë„¤ë¹„ê²Œì´ì…˜ ë†’ì´ë§Œí¼ ë³´ì •)
    function scrollToSection(sectionId) {
        const target = document.getElementById(sectionId);
        if (!target) return;
        // ë„¤ë¹„ê²Œì´ì…˜ ë†’ì´ ì¸¡ì •
        const nav = document.querySelector('nav');
        const navHeight = nav ? nav.offsetHeight : 0;
        const y = target.getBoundingClientRect().top + window.pageYOffset - navHeight;
        window.scrollTo({ top: y, behavior: 'smooth' });
    }
    document.getElementById('nav-login').addEventListener('click', function(e) {
        e.preventDefault();
        scrollToSection('user-section');
    });
    document.getElementById('nav-search').addEventListener('click', function(e) {
        e.preventDefault();
        scrollToSection('search-section');
    });
    document.getElementById('nav-board').addEventListener('click', function(e) {
        e.preventDefault();
        scrollToSection('board-section');
        loadPosts();
    });

    // ê²Œì‹œê¸€ í•„í„°ë§ ìƒíƒœ ì „ì—­ ë³€ìˆ˜
    let filterUser = null;

    // ì‚¬ìš©ì ê²€ìƒ‰ ê²°ê³¼ì—ì„œ ê²Œì‹œë¬¼ ë³´ê¸° ë²„íŠ¼ ë™ì‘
    document.getElementById('search-results').addEventListener('click', function(e) {
        if (e.target.classList.contains('btn-submit')) {
            const user = e.target.closest('.user-card').querySelector('span').textContent;
            filterUser = user;
            loadPosts(filterUser);
            // ê²Œì‹œíŒ ì„¹ì…˜ìœ¼ë¡œ ìŠ¤í¬ë¡¤
            scrollToSection('board-section');
        }
    });

    // + ë²„íŠ¼ í´ë¦­ ì‹œ ê²Œì‹œê¸€ ì‘ì„± ëª¨ë‹¬ ë„ìš°ê¸° (ê¸°ì¡´ idea-modal ì œê±°, ìƒˆ ëª¨ë‹¬ ë°©ì‹ ì ìš©)
    document.getElementById('add-idea-btn').addEventListener('click', function() {
        showCreatePostModal();
    });

    // ê²Œì‹œê¸€ ì‘ì„± ëª¨ë‹¬ í•¨ìˆ˜
    function showCreatePostModal() {
        // ê¸°ì¡´ ëª¨ë‹¬ì´ ìˆìœ¼ë©´ ì œê±°
        let oldModal = document.getElementById('create-post-modal');
        if (oldModal) oldModal.remove();
        // ëª¨ë‹¬ ìƒì„±
        const modal = document.createElement('div');
        modal.id = 'create-post-modal';
        modal.style.position = 'fixed';
        modal.style.top = '0';
        modal.style.left = '0';
        modal.style.width = '100vw';
        modal.style.height = '100vh';
        modal.style.background = 'rgba(0,0,0,0.6)';
        modal.style.display = 'flex';
        modal.style.alignItems = 'center';
        modal.style.justifyContent = 'center';
        modal.style.zIndex = '9999';
        modal.innerHTML = `
            <div style="background:#1E1E1E;padding:2rem;border-radius:8px;max-width:90vw;max-height:80vh;overflow:auto;box-shadow:0 4px 32px #000;position:relative;">
                <button id="close-create-post-modal" style="position:absolute;top:8px;right:12px;font-size:1.5rem;background:none;border:none;color:#fff;cursor:pointer;">&times;</button>
                <h2 style="color:#FF0000;margin-bottom:1rem;">ê²Œì‹œë¬¼ ì‘ì„±</h2>
                <form id="modal-idea-form">
                    <input id="modal-title" placeholder="ì œëª©" required style="width:100%;margin-bottom:1rem;padding:0.5rem;" />
                    <textarea id="modal-content" placeholder="ë‚´ìš©" required style="width:100%;min-height:120px;margin-bottom:1rem;padding:0.5rem;"></textarea>
                    <button type="submit" class="btn-submit" style="width:100%;">ë“±ë¡</button>
                </form>
            </div>
        `;
        document.body.appendChild(modal);
        document.getElementById('close-create-post-modal').onclick = function() {
            modal.remove();
        };
        // ë°”ê¹¥ í´ë¦­ ì‹œ ë‹«ê¸°
        modal.addEventListener('click', function(e) {
            if (e.target === modal) modal.remove();
        });
        // í¼ ì œì¶œ ì´ë²¤íŠ¸
        document.getElementById('modal-idea-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const title = document.getElementById('modal-title').value.trim();
            const content = document.getElementById('modal-content').value.trim();
            if (!title || !content) {
                alert('ì œëª©ê³¼ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”.');
                return;
            }
            let posts = JSON.parse(localStorage.getItem('posts') || '[]');
            posts.push({
                id: Date.now(),
                userId: localStorage.getItem('currentUser'),
                title,
                content
            });
            localStorage.setItem('posts', JSON.stringify(posts));
            modal.remove();
            loadPosts(filterUser);
            alert('ê²Œì‹œë¬¼ì´ ì„±ê³µì ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤!');
        });
    }

    // ê²Œì‹œê¸€ ë¡œë“œ (ì „ì²´ ë˜ëŠ” íŠ¹ì • ì‚¬ìš©ì)
    function loadPosts(user = null) {
        let posts = JSON.parse(localStorage.getItem('posts') || '[]');
        const postsContainer = document.getElementById('posts');
        const postTemplate = document.getElementById('post-template');
        postsContainer.innerHTML = '';
        // í•„í„°ë§ëœ ê²½ìš° ìƒë‹¨ì— ì „ì²´ ê²Œì‹œê¸€ ë³´ê¸° ë²„íŠ¼ ì¶”ê°€
        if (user) {
            const allBtn = document.createElement('button');
            allBtn.textContent = 'ì „ì²´ ê²Œì‹œê¸€ ë³´ê¸°';
            allBtn.className = 'btn-submit';
            allBtn.style.marginBottom = '1rem';
            allBtn.onclick = function() {
                filterUser = null;
                loadPosts();
            };
            postsContainer.appendChild(allBtn);
            posts = posts.filter(post => post.userId === user);
        }
        posts.forEach(post => {
            const el = postTemplate.content.cloneNode(true);
            el.querySelector('.post-title').textContent = post.title;
            el.querySelector('.post-content').textContent = post.content;
            el.querySelector('.post-author').textContent = `ì‘ì„±ì: ${post.userId}`;
            // ë³¸ì¸ë§Œ ìˆ˜ì •/ì‚­ì œ
            if (post.userId === localStorage.getItem('currentUser')) {
                el.querySelector('.btn-edit').classList.remove('hidden');
                el.querySelector('.btn-delete').classList.remove('hidden');
                el.querySelector('.btn-edit').onclick = () => editPost(post.id);
                el.querySelector('.btn-delete').onclick = () => deletePost(post.id);
            } else {
                el.querySelector('.btn-edit').classList.add('hidden');
                el.querySelector('.btn-delete').classList.add('hidden');
            }
            // ì œëª© í´ë¦­ ì‹œ ëª¨ë‹¬ë¡œ ë‚´ìš© ë³´ì—¬ì£¼ê¸°
            el.querySelector('.post-title').style.cursor = 'pointer';
            el.querySelector('.post-title').addEventListener('click', function() {
                showPostModal(post.title, post.content, post.userId);
            });
            postsContainer.appendChild(el);
        });
    }

    // ê²Œì‹œê¸€ ë‚´ìš© ëª¨ë‹¬ í‘œì‹œ í•¨ìˆ˜ ì¶”ê°€
    function showPostModal(title, content, userId) {
        // ê¸°ì¡´ ëª¨ë‹¬ì´ ìˆìœ¼ë©´ ì œê±°
        let oldModal = document.getElementById('post-view-modal');
        if (oldModal) oldModal.remove();
        // ëª¨ë‹¬ ìƒì„±
        const modal = document.createElement('div');
        modal.id = 'post-view-modal';
        modal.style.position = 'fixed';
        modal.style.top = '0';
        modal.style.left = '0';
        modal.style.width = '100vw';
        modal.style.height = '100vh';
        modal.style.background = 'rgba(0,0,0,0.6)';
        modal.style.display = 'flex';
        modal.style.alignItems = 'center';
        modal.style.justifyContent = 'center';
        modal.style.zIndex = '9999';
        modal.innerHTML = `
            <div style="background:#1E1E1E;padding:2rem;border-radius:8px;max-width:90vw;max-height:80vh;overflow:auto;box-shadow:0 4px 32px #000;position:relative;">
                <button id="close-post-view-modal" style="position:absolute;top:8px;right:12px;font-size:1.5rem;background:none;border:none;color:#fff;cursor:pointer;">&times;</button>
                <h2 style="color:#FF0000;margin-bottom:1rem;">${title}</h2>
                <div style="color:#fff;white-space:pre-line;margin-bottom:1rem;">${content}</div>
                <div style="color:#888;font-size:0.9em;">ì‘ì„±ì: ${userId}</div>
            </div>
        `;
        document.body.appendChild(modal);
        document.getElementById('close-post-view-modal').onclick = function() {
            modal.remove();
        };
        // ë°”ê¹¥ í´ë¦­ ì‹œ ë‹«ê¸°
        modal.addEventListener('click', function(e) {
            if (e.target === modal) modal.remove();
        });
    }

    // ê²Œì‹œê¸€ ìˆ˜ì •
    function editPost(postId) {
        let posts = JSON.parse(localStorage.getItem('posts') || '[]');
        const idx = posts.findIndex(p => p.id === postId && p.userId === localStorage.getItem('currentUser'));
        if (idx === -1) return;
        const newTitle = prompt('ìƒˆ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”:', posts[idx].title);
        const newContent = prompt('ìƒˆ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”:', posts[idx].content);
        if (newTitle && newContent) {
            posts[idx].title = newTitle;
            posts[idx].content = newContent;
            localStorage.setItem('posts', JSON.stringify(posts));
            loadPosts(filterUser);
        }
    }

    // ê²Œì‹œê¸€ ì‚­ì œ
    function deletePost(postId) {
        let posts = JSON.parse(localStorage.getItem('posts') || '[]');
        posts = posts.filter(p => !(p.id === postId && p.userId === localStorage.getItem('currentUser')));
        localStorage.setItem('posts', JSON.stringify(posts));
        loadPosts(filterUser);
    }

    // ë¡œê·¸ì¸/íšŒì›ê°€ì…/ë¡œê·¸ì•„ì›ƒ ë° UI
    // ìš°ì¸¡ ìƒë‹¨ ë¡œê·¸ì¸/íšŒì›ê°€ì… ë²„íŠ¼ ë Œë”ë§
    function renderHeaderAuthBtns() {
        const authBtns = document.getElementById('auth-btns');
        if (!authBtns) return;
        authBtns.innerHTML = '';
        // ë¡œê·¸ì¸ ë²„íŠ¼
        const loginBtn = document.createElement('button');
        loginBtn.id = 'header-login-btn';
        loginBtn.className = 'btn-submit';
        loginBtn.textContent = 'ë¡œê·¸ì¸';
        loginBtn.onclick = function() { showLoginModal(); };
        // íšŒì›ê°€ì… ë²„íŠ¼
        const signupBtn = document.createElement('button');
        signupBtn.id = 'header-signup-btn';
        signupBtn.className = 'btn-submit';
        signupBtn.textContent = 'íšŒì›ê°€ì…';
        signupBtn.onclick = function() { showSignupModal(); };
        // ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼
        const logoutBtn = document.createElement('button');
        logoutBtn.id = 'header-logout-btn';
        logoutBtn.className = 'btn-submit';
        logoutBtn.textContent = 'ë¡œê·¸ì•„ì›ƒ';
        logoutBtn.onclick = function() {
            localStorage.removeItem('currentUser');
            renderHeaderAuthBtns();
            document.getElementById('user-login').classList.add('active');
            document.getElementById('user-login').classList.remove('hidden');
            document.getElementById('welcome-message').classList.add('hidden');
            document.getElementById('add-idea-btn').classList.add('hidden');
            filterUser = null;
            loadPosts();
        };
        const isLoggedIn = !!localStorage.getItem('currentUser');
        if (isLoggedIn) {
            // ì‚¬ìš©ì ì´ë¦„ í‘œì‹œ
            const userSpan = document.createElement('span');
            userSpan.textContent = localStorage.getItem('currentUser');
            userSpan.style.color = '#fff';
            userSpan.style.marginRight = '0.5rem';
            userSpan.style.fontWeight = 'bold';
            authBtns.appendChild(userSpan);
            logoutBtn.style.display = 'inline-block';
            authBtns.appendChild(logoutBtn);
        } else {
            loginBtn.style.display = 'inline-block';
            signupBtn.style.display = 'inline-block';
            authBtns.appendChild(loginBtn);
            authBtns.appendChild(signupBtn);
        }
    }
    document.addEventListener('DOMContentLoaded', function() {
        renderHeaderAuthBtns();
        loadPosts(); // í˜ì´ì§€ ì§„ì… ì‹œ ê²Œì‹œíŒ í•­ìƒ ë¡œë“œ
    });

    // ë¡œê·¸ì¸ ëª¨ë‹¬ í•¨ìˆ˜ ì¶”ê°€
    function showLoginModal() {
        let oldModal = document.getElementById('login-modal');
        if (oldModal) oldModal.remove();
        const modal = document.createElement('div');
        modal.id = 'login-modal';
        modal.style.position = 'fixed';
        modal.style.top = '0';
        modal.style.left = '0';
        modal.style.width = '100vw';
        modal.style.height = '100vh';
        modal.style.background = 'rgba(0,0,0,0.6)';
        modal.style.display = 'flex';
        modal.style.alignItems = 'center';
        modal.style.justifyContent = 'center';
        modal.style.zIndex = '9999';
        modal.innerHTML = `
            <div style="background:#1E1E1E;padding:2rem;border-radius:8px;max-width:90vw;max-height:80vh;overflow:auto;box-shadow:0 4px 32px #000;position:relative;">
                <button id="close-login-modal" style="position:absolute;top:8px;right:12px;font-size:1.5rem;background:none;border:none;color:#fff;cursor:pointer;">&times;</button>
                <h2 style="color:#FF0000;margin-bottom:1rem;">ë¡œê·¸ì¸</h2>
                <form id="modal-login-form">
                    <input id="modal-login-username" placeholder="ì•„ì´ë””" required style="width:100%;margin-bottom:1rem;padding:0.5rem;" />
                    <input id="modal-login-password" type="password" placeholder="ë¹„ë°€ë²ˆí˜¸" required style="width:100%;margin-bottom:1rem;padding:0.5rem;" />
                    <button type="submit" class="btn-submit" style="width:100%">ë¡œê·¸ì¸</button>
                </form>
            </div>
        `;
        document.body.appendChild(modal);
        document.getElementById('close-login-modal').onclick = function() { modal.remove(); };
        modal.addEventListener('click', function(e) { if (e.target === modal) modal.remove(); });
        document.getElementById('modal-login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('modal-login-username').value.trim();
            const password = document.getElementById('modal-login-password').value.trim();
            if (!username || !password) {
                alert('ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
                return;
            }
            let users = JSON.parse(localStorage.getItem('users') || '{}');
            if (!users[username]) {
                alert('ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì•„ì´ë””ì…ë‹ˆë‹¤.');
                return;
            }
            if (users[username].password !== password) {
                alert('ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                return;
            }
            localStorage.setItem('currentUser', username);
            // ì‚¬ìš©ì ê´€ë¦¬ì°½ UI ê°±ì‹ 
            document.getElementById('user-login').classList.remove('active');
            document.getElementById('user-login').classList.add('hidden');
            document.getElementById('welcome-message').classList.remove('hidden');
            document.getElementById('current-user').textContent = username;
            document.getElementById('add-idea-btn').classList.remove('hidden');
            filterUser = null;
            loadPosts();
            renderHeaderAuthBtns();
            modal.remove();
        });
    }
    // ìµœì´ˆ ì§„ì… ì‹œ í—¤ë” ë²„íŠ¼ ìƒíƒœ ê°±ì‹ 
    document.addEventListener('DOMContentLoaded', function() {
        updateHeaderAuthBtns();
    });

    // ì‚¬ìš©ì ê²€ìƒ‰ ê¸°ëŠ¥ ê°œì„ : users ê°ì²´ì—ì„œ ê²€ìƒ‰
    document.getElementById('search-btn').addEventListener('click', searchUsersByName);
    document.getElementById('search-user').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            searchUsersByName();
        }
    });

    function searchUsersByName() {
        const searchTerm = document.getElementById('search-user').value.trim().toLowerCase();
        const searchResults = document.getElementById('search-results');
        if (!searchTerm) {
            searchResults.innerHTML = '<p class="search-message">ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”.</p>';
            return;
        }
        let users = JSON.parse(localStorage.getItem('users') || '{}');
        const matchedUsers = Object.keys(users).filter(user => user.toLowerCase().includes(searchTerm));
        if (matchedUsers.length === 0) {
            searchResults.innerHTML = '<p class="search-message">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
            return;
        }
        searchResults.innerHTML = '';
        matchedUsers.forEach(user => {
            const userCard = document.createElement('div');
            userCard.className = 'user-card';
            userCard.innerHTML = `
                <span>${user}</span>
                <button class="btn-submit">ê²Œì‹œë¬¼ ë³´ê¸°</button>
            `;
            searchResults.appendChild(userCard);
        });
    }

    document.getElementById('login-form').addEventListener('submit', function(e) {
        e.preventDefault();
        const username = document.getElementById('username').value.trim();
        const password = document.getElementById('password').value.trim();
        if (!username || !password) {
            alert('ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
            return;
        }
        let users = JSON.parse(localStorage.getItem('users') || '{}');
        if (!users[username]) {
            alert('ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì•„ì´ë””ì…ë‹ˆë‹¤.');
            return;
        }
        if (users[username].password !== password) {
            alert('ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
            return;
        }
        localStorage.setItem('currentUser', username);
        document.getElementById('user-login').classList.remove('active');
        document.getElementById('user-login').classList.add('hidden');
        document.getElementById('welcome-message').classList.remove('hidden');
        document.getElementById('current-user').textContent = username;
        document.getElementById('add-idea-btn').classList.remove('hidden');
        filterUser = null;
        loadPosts();
    });

    document.getElementById('logout-btn').addEventListener('click', function() {
        localStorage.removeItem('currentUser');
        document.getElementById('user-login').classList.add('active');
        document.getElementById('user-login').classList.remove('hidden');
        document.getElementById('welcome-message').classList.add('hidden');
        document.getElementById('add-idea-btn').classList.add('hidden');
        filterUser = null;
        loadPosts();
    });

    document.getElementById('login-signup-btn').onclick = function() { showSignupModal(); };

    function showSignupModal() {
        let oldModal = document.getElementById('signup-modal');
        if (oldModal) oldModal.remove();
        const modal = document.createElement('div');
        modal.id = 'signup-modal';
        modal.style.position = 'fixed';
        modal.style.top = '0';
        modal.style.left = '0';
        modal.style.width = '100vw';
        modal.style.height = '100vh';
        modal.style.background = 'rgba(0,0,0,0.6)';
        modal.style.display = 'flex';
        modal.style.alignItems = 'center';
        modal.style.justifyContent = 'center';
        modal.style.zIndex = '9999';
        modal.innerHTML = `
            <div style="background:#1E1E1E;padding:2rem;border-radius:8px;max-width:90vw;max-height:80vh;overflow:auto;box-shadow:0 4px 32px #000;position:relative;">
                <button id="close-signup-modal" style="position:absolute;top:8px;right:12px;font-size:1.5rem;background:none;border:none;color:#fff;cursor:pointer;">&times;</button>
                <h2 style="color:#FF0000;margin-bottom:1rem;">íšŒì›ê°€ì…</h2>
                <form id="modal-signup-form">
                    <input id="modal-signup-username" placeholder="ìƒˆ ì‚¬ìš©ì ì´ë¦„" required style="width:100%;margin-bottom:1rem;padding:0.5rem;" />
                    <input id="modal-signup-password" type="password" placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸" required style="width:100%;margin-bottom:1rem;padding:0.5rem;" />
                    <button type="submit" class="btn-submit" style="width:100%">íšŒì›ê°€ì…</button>
                </form>
            </div>
        `;
        document.body.appendChild(modal);
        document.getElementById('close-signup-modal').onclick = function() { modal.remove(); };
        modal.addEventListener('click', function(e) { if (e.target === modal) modal.remove(); });
        document.getElementById('modal-signup-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('modal-signup-username').value.trim();
            const password = document.getElementById('modal-signup-password').value.trim();
            if (!username || !password) {
                alert('ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
                return;
            }
            let users = JSON.parse(localStorage.getItem('users') || '{}');
            if (users[username]) {
                alert('ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì•„ì´ë””ì…ë‹ˆë‹¤.');
                return;
            }
            users[username] = { password };
            localStorage.setItem('users', JSON.stringify(users));
            alert('íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë¡œê·¸ì¸ í•´ì£¼ì„¸ìš”.');
            modal.remove();
        });
    }
    </script>
</body>
</html>
